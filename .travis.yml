language: python

python:
    - "2.7"
    - "3.5"

install:
    - pip install .
    - pip install -r requirements.txt
    - pip install -r requirements-dev.txt

env:
    global:
        - SWAK_HOME=$TRAVIS_BUILD_DIR/devhome
        - SWAK_EXE_DIR=$TRAVIS_BUILD_DIR/swak

script:
    - ls -alh $SWAK_EXE_DIR/*
    - python -c "from swak.plugin import get_plugins_initpy_path; print(get_plugins_initpy_path())"
    - coverage run --source swak --module pytest tests -s
    - ./tools/build.sh

after_success:
    - pip install codecov
    - coverage combine .
    - codecov

notifications:
    email: false
